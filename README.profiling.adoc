= Integrating Application Profiling

This document outlines the steps required to configure an application to send profiling data to your Docker monitoring stack, which includes Pyroscope for profile storage and Grafana for visualization.

== Prerequisites

* Your application should be instrumented with a profiling library that supports continuous profiling and integrates with Pyroscope.

== Overview

Your monitoring stack utilizes Pyroscope to store profiling data. Applications need to be configured to send their profiling data to Pyroscope via the Pyroscope agent or client library.

== Configuration Steps

=== Application Instrumentation

. **Choose a Profiling Library:**
Select a profiling library suitable for your application's programming language and compatible with Pyroscope (e.g., https://grafana.com/docs/pyroscope/latest/configure-client/language-sdks/go_push[pyroscope-go], https://grafana.com/docs/pyroscope/latest/configure-client/language-sdks/python[pyroscope-python]).
. **Install the Library:**
Add the chosen profiling library as a dependency to your project.
. **Initialize and Configure the Profiling Agent/Client:**
Modify your application code to initialize the Pyroscope agent or client, configuring it to send profiling data to your Pyroscope instance.
. **Configure the Pyroscope Endpoint:**
Configure your application's profiling agent or client to send profiling data to the Pyroscope endpoint. This is typically done through environment variables or configuration files.
* **Endpoint:** `http://docker-monitoring-pyroscope-1.docker-monitoring_public:4040`

=== Network Configuration

Ensure that your application's Docker container is connected to the same Docker network as your monitoring stack. In your `docker-compose.yml`, you have defined `docker-monitoring_public`.
[source,yaml]
----
networks:
  - docker-monitoring_public
----

=== Verify Profiling Data in Grafana

1. **Access Grafana:**
Open Grafana in your web browser at `http://localhost:3000`.
2. **Explore Profiles:**
Navigate to the Explore section and select Pyroscope as your data source.
3. **Search for Profiles:**
Use the search functionality to find profiles generated by your application. You should see the profiling data, including flame graphs and other visualizations.

== Troubleshooting

* **Connectivity Issues:**
+
Verify that your application can connect to the Pyroscope endpoint. +
Use `ping docker-monitoring-pyroscope-1.docker-monitoring_public` +
or `telnet docker-monitoring-pyroscope-1.docker-monitoring_public 4040` +
from within your application's container to check connectivity.
